<!--ADD-ONS: noch einen timestamp hinzufügen und den admin account aus der tabelle entfernen-->

{% extends 'base.html' %}

{% block content %}
<br>
<h1>Admin</h1>
<br>

<section class="showcase" v-for="sample in collection" :key="sample">
    <div class="nes-container with-title admin-tables">
      <h2 class="title">Admin-Account</h2>
      <table style="border:3px solid black" class="waiting-table">
        <th>Username</th>
        <th>Id</th>
        <th>Buttons</th>
        {% for user in admin_accounts %}
          <tr>
            <td>{{ user['username'] }}</td> <!-- bei 'username' und den anderen kolonnennamen hat es gänsefüsschen weil man damit nur die werte der kolonne von einem einzigen user bekommen möchte! sonst würde es alle werte der kolonne username ansprechen! 'username' ist eine liste mit allen usernamen der kolonne username! -->
            <td>{{ user['id'] }}</td> <!-- Display the id -->
            <td>
                <!--the form will submit this t the /admin-route!-->
                <form action="{{ url_for('admin') }}" method="POST">
                    <!--diese linie reicht die id welche veränder wurde an den server weiter damit die python-function dann auch am richtigen user durchgeführt wird!-->
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="delete" type="submit">Delete</button>
                </form>
                <form action="{{ url_for('admin') }}" method="POST" style="display:inline;">
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="depromote" type="submit">Remove as Admin!</button>
                </form>
            </td>
          </tr>
        {% endfor %}
    </table>
</div>
</section>



<br>

<section class="showcase" v-for="sample in collection" :key="sample">
    <section class="nes-container with-title admin-tables">
      <h2 class="title">Active Users (is_active = 1)</h2>
      <table style="border:3px solid black;" class="waiting-table">
        <th>Username</th>
        <th>Id</th>
        <th>Actions</th>
        {% for user in active_users %}
          <tr>
            <td>{{ user['username'] }}</td>
            <td>{{ user['id'] }}</td>
            <td>
                <!-- Form for Deactivate -->
                <form action="{{ url_for('admin') }}" method="POST" style="display:inline;">
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="deactivate" type="submit">Deactivate</button>
                </form>
    
                <!-- Form for Delete -->
                <form action="{{ url_for('admin') }}" method="POST" style="display:inline;">
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="delete" type="submit">Delete</button>
                </form>
    
                <!-- Form for Promote to Admin -->
                <form action="{{ url_for('admin') }}" method="POST" style="display:inline;">
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="promote" type="submit">Promote to Admin</button>
                </form>
            </td>
          </tr>
        {% endfor %}
    </table>
    </section>
</section>


<br>


<section class="showcase" v-for="sample in collection" :key="sample">
    <section class="nes-container with-title">
      <h2 class="title">Inactive Users (is_active = 0)</h2>
      <table style="border:3px solid black" class="waiting-table">
    <th>Username</th>
    <th>Id</th>
    <th>Approve</th>
    {% for user in inactive_users %}
      <tr>
        <td>{{ user['username'] }}</td> <!-- bei 'username' und den anderen kolonnennamen hat es gänsefüsschen weil man damit nur die werte der kolonne von einem einzigen user bekommen möchte! sonst würde es alle werte der kolonne username ansprechen! 'username' ist eine liste mit allen usernamen der kolonne username! -->
        <td>{{ user['id'] }}</td> <!-- Display the id -->
        <td>
            <!--the form will submit this t the /admin-route!-->
            <form action="{{ url_for('admin') }}" method="POST">
                <!--diese linie reicht die id welche veränder wurde an den server weiter damit die python-function dann auch am richtigen user durchgeführt wird!-->
                <input type="hidden" name="user_id" value="{{ user['id'] }}">
                <!--with buttons the value often stands for the function behind the button and the name is for grouping multiple buttons!-->
                <button name="action" value="activate" type="submit">Activate</button>
            </form>
            <form action="{{ url_for('admin') }}" method="POST">
                <!--diese linie reicht die id welche veränder wurde an den server weiter damit die python-function dann auch am richtigen user durchgeführt wird!-->
                <input type="hidden" name="user_id" value="{{ user['id'] }}">
                <button name="action" value="delete" type="submit">Delete</button>
            </form>
        </td>
      </tr>
    {% endfor %}
</table>
    </section>
</section>


<br>

<section class="showcase" v-for="sample in collection" :key="sample">
    <section class="nes-container with-title">
      <h2 class="title">Waiting Users (is_active = -1)</h2>
      <table style="border:3px solid black" class="waiting-table">
        <th>Username</th>
        <th>Id</th>
        <th>Approve</th>
        {% for user in waiting_users %}
          <tr>
            <td>{{ user['username'] }}</td> <!-- bei 'username' und den anderen kolonnennamen hat es gänsefüsschen weil man damit nur die werte der kolonne von einem einzigen user bekommen möchte! sonst würde es alle werte der kolonne username ansprechen! 'username' ist eine liste mit allen usernamen der kolonne username! -->
            <td>{{ user['id'] }}</td> <!-- Display the id -->
            <td>
                <!--the form will submit this t the /admin-route!-->
                <form action="{{ url_for('admin') }}" method="POST">
                    <!--diese linie reicht die id welche veränder wurde an den server weiter damit die python-function dann auch am richtigen user durchgeführt wird!-->
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <!--with buttons the value often stands for the function behind the button and the name is for grouping multiple buttons!-->
                    <button name="action" value="activate" type="submit">Approve</button>
                </form>
                <form action="{{ url_for('admin') }}" method="POST">
                    <!--diese linie reicht die id welche veränder wurde an den server weiter damit die python-function dann auch am richtigen user durchgeführt wird!-->
                    <input type="hidden" name="user_id" value="{{ user['id'] }}">
                    <button name="action" value="delete" type="submit">Deny</button>
                </form>
            </td>
          </tr>
        {% endfor %}
    </table>
    </section>
</section>


{% endblock %}
