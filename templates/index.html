{% extends 'base.html' %}

{% block content %}

<h2>Inhaltsverzeichnis</h2>

<!-- Check if there are any user posts, and link to the first one -->
{% if user_posts %}
  <!-- Link to the first user's post -->
  <a href="{{ url_for('show_post', username=user_posts[0]['username']) }}">View Book</a>
{% else %}
  <p>No posts available to view.</p>
{% endif %}


<ul>
  <!-- Loop through all users and their posts -->
  {% for user_post in user_posts %}
    <li>
      <!-- Always show the username and link to the user's post page -->
      <!--when the user is not logged in and clicks on one of the links it gets redirected to the login page-->
      <a href="{{ url_for('show_post', username=user_post['username']) }}">
        {{ user_post['username'] }}'s Post
      </a>
      
      <!-- Check if the user has content in the post -->
      {% if user_post['content'] %}
        (posted on: {{ user_post['created_at'] }})
      {% else %}
        - No post yet
      {% endif %}
    </li>
  {% endfor %}
</ul>

{% endblock %}
